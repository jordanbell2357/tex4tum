<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- title, description, favicon -->
    <title>Calculator</title>
    <meta name="description" content="Interactive Knowledge Base for Engineers
" />
    <link rel="shortcut icon" href="/res/img/Logo.png" />
    <link rel="canonical" href="/calculator">

    <!-- Brower bar color for mobile devices (TUM blue) -->
    <meta name="theme-color" content="#005293">

    <!-- Load CSS in head, JS after footer -->
    <!-- Main/Bootstrap -->
    <link rel="stylesheet" href="/assets/main.css">
    <link rel="stylesheet" href="/assets/syntax-highlight.css">

    <!-- Fontawesome CSS -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css"
        integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">

    <!-- KaTeX CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css"
        integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">
</head>


<body>

    <!-- Bootstrap 4.0 Navigation Bar -->
<nav class="navbar sticky-top navbar-dark bg-primary text-white navbar-expand-lg">

    <!-- sticky left: Logo -->
    <div class="navbar-brand">
        <a href="/index.html">
            <img src="/res/img/Logo-inv.png" height="30" alt="Logo">
        </a>
    </div>


    <!-- sticky right: search bar  -->
    
    <form class="form-inline order-lg-3" role="search">
        <div id="search" class="search-container">
            <input class="form-control search-input w-100" type="search" placeholder="&#xf002; Search (fuzzy)"
                tabindex="1">
            <div class="ac-results-wrapper"></div>
        </div>
    </form>
    


    <!-- Toggle button for collapsed items  -->
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive"
        aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>


    <!-- Collapsable Items: Links -->
    <div class="collapse navbar-collapse justify-content-start order-6 order-lg-2" id="navbarResponsive">
        <ul class="navbar-nav">
            <li class="nav-item">
                <a class="nav-link" href="/calculator.html"><i class="fa fa-calculator"></i>
                    Calc</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/sheets.html"><i class="fa fa-file"></i> Sheets</a>
            </li>
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown"
                    aria-haspopup="true" aria-expanded="false">
                    <i class="fa fa-info-circle"></i> Info
                </a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                    <a class="dropdown-item" href="/about.html"><i class="fa fa-question"></i>
                        About TeX4TUM</a>
                    <a class="dropdown-item" href="/team.html"><i class="fa fa-users"></i>
                        Team</a>
                    <a class="dropdown-item" href="/demo.html"><i class="fa fa-play-circle"></i>
                        Feature Demo</a>
                    <div class="dropdown-divider"></div>
                    <h6 class="dropdown-header"><i class="fa fa-handshake"></i> Contribute</h6>
                    <a class="dropdown-item" href="/support.html"><i class="fa fa-life-ring"></i>
                        Support</a>
                    <a class="dropdown-item" href="/contribution.html"><i class="fa fa-edit"></i>
                        Write Article</a>
                    <a class="dropdown-item" href="/todo.html"><i class="fa fa-tasks"></i> ToDo
                        List</a>
                    <a class="dropdown-item" href="https://github.com/latex4ei/tex4tum"><i class="fab fa-github"></i>
                        Develop Features</a>
                    <a class="dropdown-item" href="https://github.com/latex4ei/tex4tum/issues"><i class="fa fa-bug"></i>
                        Report a bug</a>
                    <a class="dropdown-item" href="/contact.html"><i class="fas fa-user-edit"></i>
                        Contact</a>
                </div>
            </li>
            <li class="nav-item dropdown">
                <a class="nav-link btn-group dropdown-toggle" href="/index.html"
                    id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true"
                    aria-expanded="false"><i class="fa fa-cog"></i> Options</a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                    <h6 class="dropdown-header">Display Options</h6>
                    <div class="form-check dropdown-item">
                        <input class="form-check-input" id="checkbox_definition" name="disp_opt" type="checkbox"
                            onchange="Options.changeOption(this)">
                        <label class="form-check-label" for="checkbox_definition">Definitions</label>
                    </div>
                    <div class="form-check dropdown-item">
                        <input class="form-check-input" id="checkbox_example" name="disp_opt" type="checkbox"
                            onchange="Options.changeOption(this)">
                        <label class="form-check-label" for="checkbox_example">Examples</label>
                    </div>
                    <div class="form-check dropdown-item">
                        <input class="form-check-input" id="checkbox_explanation" name="disp_opt" type="checkbox"
                            onchange="Options.changeOption(this)">
                        <label class="form-check-label" for="checkbox_explanation">Explanations</label>
                    </div>
                    <div class="form-check dropdown-item">
                        <input class="form-check-input" id="checkbox_legend" name="disp_opt" type="checkbox"
                            onchange="Options.changeOption(this)">
                        <label class="form-check-label" for="checkbox_legend">Legends</label>
                    </div>
                </div>
            </li>
        </ul>
    </div>



</nav>


    <main class="container" aria-label="Content">
        


<h1><a data-toggle="collapse" href="#title_def" aria-expanded="false" aria-controls="title_def">
        
        <i class="fas fa-calculator"></i>
        
        Calculator
    </a><a class="float-right small" style="font-size: small"
        href="https://github.com/latex4ei/tex4tum/edit/master/_info/calculator.md">[edit]</a></h1>

<p>
    
</p>

<!-- Basics -->
<!--    -->
<!-- \newcommand{\diff}{\mathop{}\!\mathrm{\vphantom( d}} -->
<!-- SI Units -->
<!--=============================================================== -->
<!-- KaTeX Tweaks -->
<div id="title_def" class="definition collapse">
<div class="card border-primary mb-1">
<div class="card-body">
<h5 class="card-title text-primary">
Definition
</h5>
<p class="card-text">
This is a powerful, client-side JS calculator based on <a href="http://mathjs.org/docs/index.html">mathjs</a>.
</p>
</div>
</div>
</div>
<p>Try it. Full expression syntax on <a href="http://mathjs.org/docs/expressions/syntax.html">mathjs</a>.</p>
<div id="commandline">
loading…
</div>
<p>Shortcuts: <code>s</code>: set focus, <code>Ctrl+F11</code>: toggle fullscreen.</p>
<h2 id="what-you-can-do">What you can do:</h2>
<ul>
<li>Algebraic calculations</li>
<li>Define functions, calculate derivative, simplify</li>
<li>Vector / Matrix calculations (determinant, etc.)</li>
</ul>
<h5 class="clp_title text-warning" data-toggle="collapse" href="#expl18">
<i class='fa fa-comment-dots'></i> Explanation
</h5>
<div id='expl18' class='explanation collapse'>
<div class='card border-warning mb-1'>
<div class='card-body'>
<p class='card-text'>
<strong>Data Types:</strong> Bool <code>true</code>/<code>false</code> , Num <code>7, 1.5e-9</code>, Complex <code>2+3i</code>, Units <code>3.0 cm, 2.7 kg</code></br> <strong>Vector / Matrix:</strong> <code>v = [1, 2, 3]</code>, <code>M = [11, 12; 21, 22]</code></br> <strong>Predefined Functions:</strong> <code>abs()</code>, <code>sqrt()</code>, <code>sin()</code>, <code>log()</code> </br> <strong>Own Functions:</strong> <code>f(x) = x^2 - 5</code>, then call <code>f(3)</code>,
<p>
</div>
</div>
</div>
<h5 class="clp_title text-success" data-toggle="collapse" href="#example18">
<i class='fa fa-chart-bar'></i> Example
</h5>
<div id='example18' class='example collapse'>
<div class='card border-success mb-1'>
<div class='card-body'>
<p class='card-text'>
<code>f(x) = x^2 + 3x -1</code></br> <code>fdev = derivative("x^2 + 3x -1", "x")</code> // 2x + 3</br> <code>A = [2, 1; 0, 2]</code></br> <code>d = det(A)</code>
<p>
</div>
</div>
</div>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/4.4.2/math.min.js"></script>
<style type="text/css">

.cle .input,
.cle .results .expr,
.cle .results .res {
  font-family: monospace;
  font-size: 1em;
  color: #333333;
}

.cle {
  position: relative;
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 3px;
  border: 1px solid #e5e5e5;
  background-color: #f5f5f5;
  border-radius: 2px;

  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
}

.cle.fullscreen {
  position: fixed;
  left: 0;
  top: 0;
  padding-top: 4em;
  height: 100%;
  z-index: 999;
}

.cle .top-panel {
  width: 100%;
  height: 100%;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
  margin: 0 0 -30px 0;
  padding: 0 0 30px 0;
}

.cle .bottom-panel {
  position: relative;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
  width: 100%;
  height: 30px;
}

.cle button.fullscreen {
  position: absolute;
  top: 8px;
  right: 8px;
  padding: 0;
  width: 24px;
  height: 20px;
  z-index: 1;
  border: none;
  cursor: pointer;
}

.cle.fullscreen button.fullscreen {
  top: 5em;  /* +1 em more than normal for navbar */
}


.cle button.fullscreen:hover {
  opacity: 0.5;
  filter: alpha(opacity=50); /* For IE8 and earlier */
}


.cle .results {
  width: 100%;
  height: 100%;
  min-height: 5rem;
  position: relative;
  overflow: auto;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
  padding: 4px;

  border: 1px solid #e5e5e5;
  background-color: white;
  box-shadow: inset 2px 2px 5px rgba(192, 192, 192, 0.1);
  line-height: 1.5;
}

.cle .results .expr {
  padding: 0;
  margin: 0;
}

.cle .results .res {
  padding: 0;
  margin: 0 0 5px 30px;
  color: #005293;
}

.cle .results .expr,
.cle .results .res {
  background: none;
  border: none;

  /* http://css-tricks.com/snippets/css/make-pre-text-wrap/ */
  white-space: pre-wrap;       /* css-3 */
  white-space: -moz-pre-wrap;  /* Mozilla, since 1999 */
  white-space: -pre-wrap;      /* Opera 4-6 */
  white-space: -o-pre-wrap;    /* Opera 7 */
  word-wrap: break-word;       /* Internet Explorer 5.5+ */
}

.cle .input-left {
  width: 100%;
  height: 100%;
  margin: 0 -80px 0 0;
  padding: 0 80px 4px 0;
  float: left;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
}

.cle .input-right {
  width: 80px;
  height: 100%;
  margin: 0;
  padding: 0 0 4px 4px;
  float: right;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
}

.cle .input {
  width: 100%;
  height: 100%;
  margin: 4px 0 0 0;
  padding: 2px 4px;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;

  border: 1px solid #e5e5e5;
  background-color: white;
  box-shadow: inset 2px 2px 5px rgba(192, 192, 192, 0.1);
}

.cle button.eval {
  color: #363636;
  width: 100%;
  height: 100%;
  margin: 4px 0;
  padding: 0;
}

.result-info-icon {
  color: white;
  background: lightgray;

  border-radius: 3px;

  display: inline-block;
  text-align: center;
  margin: 0 6px;
  padding: 0 3px;

  cursor: pointer;
  transition: 0.1s all;
}

.result-info-icon:hover {
  background: darkgray;
  transition: 0.3s all;
}


</style>
<script type="text/javascript">
/**
 * A small command line editor to demonstrate the math.js parser.
 * @param {Object} params    Configuration parameter. Available:
 *                           {HTMLElement} container DOM Element to contain
 *                                                   the editor
 *                           {Object} [math]         An instance of math.js
 *                           {String} [id]           Optional id for the editor,
 *                                                   used to persist data.
 *                                                   "default" by default.
 */
function CommandLineEditor (params) {
  // get instance of math.js from params, or create one
  var math = params.math || mathjs();

  // object with utility methods
  var util = {};

  /**
   * Returns the version of Internet Explorer or a -1
   * (indicating the use of another browser).
   * Source: http://msdn.microsoft.com/en-us/library/ms537509(v=vs.85).aspx
   * @return {Number} Internet Explorer version, or -1 in case of an other browser
   */
  util.getInternetExplorerVersion = function getInternetExplorerVersion () {
    var rv = -1; // Return value assumes failure.
    if (navigator.appName == 'Microsoft Internet Explorer')
    {
      var ua = navigator.userAgent;
      var re  = new RegExp("MSIE ([0-9]{1,}[\.0-9]{0,})");
      if (re.exec(ua) != null) {
        rv = parseFloat( RegExp.$1 );
      }
    }
    return rv;
  };

  /**
   * Add and event listener
   * @param {Element}  element       An html element
   * @param {string}   action        The action, for example "click",
   *                                 without the prefix "on"
   * @param {function}    listener   The callback function to be executed
   */
  util.addEventListener = function addEventListener(element, action, listener) {
    if (element.addEventListener) {
      element.addEventListener(action, listener, false);
    } else {
      element.attachEvent('on' + action, listener);  // IE browsers
    }
  };

  /**
   * Remove an event listener from an element
   * @param {Element}  element   An html dom element
   * @param {string}   action    The name of the event, for example "mousedown"
   * @param {function} listener  The listener function
   */
  util.removeEventListener = function removeEventListener (element, action, listener) {
    if (element.removeEventListener) {
      element.removeEventListener(action, listener, false);
    } else {
      element.detachEvent('on' + action, listener);  // IE browsers
    }
  };

  /**
   * Stop event propagation
   */
  util.stopPropagation = function stopPropagation (event) {
    if (event.stopPropagation) {
      event.stopPropagation();  // non-IE browsers
    }
    else {
      event.cancelBubble = true;  // IE browsers
    }
  };

  /**
   * Cancels the event if it is cancelable, without stopping further propagation of the event.
   */
  util.preventDefault = function preventDefault (event) {
    if (event.preventDefault) {
      event.preventDefault();  // non-IE browsers
    }
    else {
      event.returnValue = false;  // IE browsers
    }
  };

  /**
   * Clear all DOM childs from an element
   * @param {HTMLElement} element
   */
  util.clearDOM = function clearDOM (element) {
    while (element.firstChild) {
      element.removeChild(element.firstChild);
    }
  };

  // read the parameters
  var container = (params && params.container) ? params.container : undefined;
  if (!container) {
    throw new Error('Required parameter "container" missing in configuration parameters');
  }
  var id = (params && params.id) ? String(params.id) : 'default';

  // clear the container
  util.clearDOM(container);

  // validate if math.js is loaded.
  var error;
  if (typeof math === 'undefined' || !math.parser) {
    error = document.createElement('div');
    error.appendChild(document.createTextNode(
        'Cannot create parser, math.js not loaded.'));
    error.style.color = 'red';
    container.appendChild(error);
    return;
  }

  // validate browser
  // the editor does not work well on IE7
  // TODO: make the demo working on IE7
  var ieVersion = util.getInternetExplorerVersion();
  if (ieVersion == 6 || ieVersion == 7) {
    error = document.createElement('div');
    error.appendChild(document.createTextNode(
        'Sorry, this demo is not available on IE7 and older. The math.js ' +
            'library itself works fine on every version of IE though.'));
    error.style.color = 'red';
    container.appendChild(error);
    return;
  }

  // define parameters
  var dom = {},
      fullscreen = false,
      history = [],
      historyIndex = -1,
      parser = math.parser();

  function resize() {
    // position the full screen button in the top right
    // var top = 8;
    // var right = (dom.topPanel.clientWidth - dom.results.clientWidth) + 6;
    // dom.fullscreen.style.top = top + 'px';
    // dom.fullscreen.style.right = right + 'px';
  }

  function toggleFullscreen() {
    if (fullscreen) {
      exitFullscreen();
    }
    else {
      showFullscreen()
    }
  }

  function showFullscreen() {
    dom.frame.className = 'cle fullscreen';
    document.body.style.overflow = 'hidden'; // (works only if body.style.height is defined)
    fullscreen = true;
    resize();
    scrollDown();
    dom.input.focus();
  }

  function exitFullscreen() {
    dom.frame.className = 'cle';
    document.body.style.overflow = '';
    fullscreen = false;
    resize();
    scrollDown();
  }

  function scrollDown() {
    dom.results.scrollTop = dom.results.scrollHeight;
  }

  // Auto complete current input
  function autoComplete () {
    var name;
    var text = dom.input.value;
    var end = /[a-zA-Z_0-9]+$/.exec(text);
    if (end) {
      var keyword = end[0];
      var matches = [];

      // scope variables
      // TODO: not nice to read the (private) defs inside the scope
      for (var def in parser.scope) {
        if (parser.scope.hasOwnProperty(def)) {
          if (def.indexOf(keyword) == 0) {
            matches.push(def);
          }
        }
      }

      // commandline keywords
      if ('clear'.indexOf(keyword) == 0) {
        matches.push('clear');
      }

      // math functions and constants
      var ignore = ['expr', 'type'];
      for (var func in math) {
        if (math.hasOwnProperty(func)) {
          if (func.indexOf(keyword) == 0 && ignore.indexOf(func) == -1) {
            matches.push(func);
          }
        }
      }

      // units
      var Unit = math.type.Unit;
      for (name in Unit.UNITS) {
        if (Unit.UNITS.hasOwnProperty(name)) {
          if (name.indexOf(keyword) == 0) {
            matches.push(name);
          }
        }
      }
      for (name in Unit.PREFIXES) {
        if (Unit.PREFIXES.hasOwnProperty(name)) {
          var prefixes = Unit.PREFIXES[name];
          for (var prefix in prefixes) {
            if (prefixes.hasOwnProperty(prefix)) {
              if (prefix.indexOf(keyword) == 0) {
                matches.push(prefix);
              }
              else if (keyword.indexOf(prefix) == 0) {
                var unitKeyword = keyword.substring(prefix.length);

                for (var n in Unit.UNITS) {
                  if (Unit.UNITS.hasOwnProperty(n)) {
                    if (n.indexOf(unitKeyword) == 0 && Unit.isValuelessUnit(prefix + n)) {
                      matches.push(prefix + n);
                    }
                  }
                }
              }
            }
          }
        }
      }

      // TODO: in case of multiple matches, show a drop-down box to select one
      var firstMatch = matches[0];
      if (firstMatch) {
        text = text.substring(0, text.length - keyword.length) + firstMatch;
        dom.input.value = text;
      }
    }
  }

  /**
   * KeyDown event handler to catch global key presses in the window
   * @param {Event} event
   */
  function onWindowKeyDown (event) {
    if (dom.frame.parentNode != container) {
      destroy();
    }

    event = event || window.event;
    var target = event.target || event.srcElement;
    var keynum = event.which || event.keyCode;
    if (keynum == 83) { // s
      if (target.nodeName.toUpperCase() != 'INPUT') {
        dom.input.focus();
        util.preventDefault(event);
        util.stopPropagation(event);
      }
    }
    else if (keynum == 71) { // g
      if (target.nodeName.toUpperCase() != 'INPUT') {
        var search = document.getElementById('gsc-i-id1');
        if (search) search.focus();
        util.preventDefault(event);
        util.stopPropagation(event);
      }
    }
    else if (keynum == 27) { // ESC
      if (fullscreen) {
        exitFullscreen();
        util.preventDefault(event);
        util.stopPropagation(event);
      }
    }
    else if (event.ctrlKey && keynum == 122) { // Ctrl+F11
      toggleFullscreen();
      if (fullscreen) {
        dom.input.focus();
      }
      util.preventDefault(event);
      util.stopPropagation(event);
    }
  }

  /**
   * Resize event handler
   */
  function onWindowResize () {
    if (dom.frame.parentNode != container) {
      destroy();
    }

    resize();
  }

  /**
   * KeyDown handler for the input field
   * @param event
   * @returns {boolean}
   */
  function onKeyDown (event) {
    event = event || window.event;

    var keynum = event.which || event.keyCode;
    switch (keynum) {
      case 9: // Tab
        autoComplete();
        util.preventDefault(event);
        util.stopPropagation(event);
        return false;
        break;

      case 13: // Enter
        evalInput();
        util.preventDefault(event);
        util.stopPropagation(event);
        return false;
        break;

      case 38: // Arrow up
        if (historyIndex > 0) {
          historyIndex--;
          dom.input.value = history[historyIndex] || '';
          util.preventDefault(event);
          util.stopPropagation(event);
        }
        return false;
        break;

      case 40: // Arrow down
        if (historyIndex < history.length) {
          historyIndex++;
          dom.input.value = history[historyIndex] || '';
          util.preventDefault(event);
          util.stopPropagation(event);
        }
        return false;
        break;

      default:
        historyIndex = history.length;
        break;
    }

    return true;
  }

  /**
   * Destroy the editor: cleanup HTML DOM and global event listeners
   */
  function create() {
    // create main frame for the editor
    dom.frame = document.createElement('div');
    dom.frame.className = 'cle';
    container.appendChild(dom.frame);

    // create two panels for the layout
    dom.topPanel = document.createElement('div');
    dom.topPanel.className = 'top-panel';
    dom.frame.appendChild(dom.topPanel);
    dom.bottomPanel = document.createElement('div');
    dom.bottomPanel.className = 'bottom-panel';
    dom.frame.appendChild(dom.bottomPanel);

    // create div to hold the results
    dom.results = document.createElement('div');
    dom.results.className = 'results';
    dom.topPanel.appendChild(dom.results);

    // create fullscreen button
    dom.fullscreen = document.createElement('button');
    dom.fullscreen.className = 'fullscreen fa fa-expand-arrows-alt';
    dom.fullscreen.title = 'Toggle full screen display (Ctrl+F11)';
    dom.fullscreen.onclick = toggleFullscreen;
    dom.topPanel.appendChild(dom.fullscreen);

    // panels for the input field and button
    dom.inputLeft = document.createElement('div');
    dom.inputLeft.className = 'input-left';
    dom.bottomPanel.appendChild(dom.inputLeft);
    dom.inputRight = document.createElement('div');
    dom.inputRight.className = 'input-right';
    dom.bottomPanel.appendChild(dom.inputRight);

    dom.input = document.createElement('input');
    dom.input.className = 'input';
    dom.input.title = 'Enter an expression';
    dom.input.onkeydown = onKeyDown;
    dom.inputLeft.appendChild(dom.input);

    // create an eval button
    dom.btnEval = document.createElement('button');
    dom.btnEval.appendChild(document.createTextNode('Evaluate'));
    dom.btnEval.className = 'eval';
    dom.btnEval.title = 'Evaluate the expression (Enter)';
    dom.btnEval.onclick = evalInput;
    dom.inputRight.appendChild(dom.btnEval);

    // create global event listeners
    util.addEventListener(window, 'keydown', onWindowKeyDown);
    util.addEventListener(window, 'resize', onWindowResize);
  }

  /**
   * Destroy the editor: cleanup HTML DOM and global event listeners
   */
  function destroy() {
    // destroy DOM
    if (dom.frame.parentNode) {
      dom.frame.parentNode.removeChild(dom.frame);
    }

    // destroy event listeners
    util.removeEventListener(window, 'keydown', onWindowKeyDown);
    util.removeEventListener(window, 'resize', onWindowResize);
  }

  /**
   * Trim a string
   * http://stackoverflow.com/a/498995/1262753
   * @param str
   * @return {*|void}
   */
  function trim(str) {
    return str.replace(/^\s+|\s+$/g, '');
  }

  /**
   * Load saved expressions or example expressions
   */
  function load() {
    var expressions;
    if (localStorage) {
      // load expressions from local storage
      var data = localStorage[id];
      if (data) {
        expressions = JSON.parse(data);
      }
    }
    if (!expressions || !(expressions instanceof Array)) {
      // load some example expressions
      expressions = [
        'a = 5.08 cm + 2 inch',
        'sin(90 deg)',
        'f(x) = 3x^2 + 4x - 5',
        'f(2)'
      ];
    }

    // evaluate all expressions
    expressions.forEach(function (expr) {
      eval(expr);
    });
  }

  /**
   * Save executed expressions
   */
  function save() {
    if (localStorage) {
      localStorage[id] = JSON.stringify(history);
    }
  }

  function clear() {
    history = [];
    historyIndex = -1;
    parser.clear();

    util.clearDOM(dom.results);
    dom.input.value = '';
    resize();
    // save(); // TODO: save expressions (first we need a method to restore the examples)
  }

  function eval (expr) {
    expr = trim(expr);

    if (expr == 'clear') {
      clear();
      return;
    }

    if (expr) {
      history.push(expr);
      historyIndex = history.length;

      var res, resStr, info;
      try {
        res = parser.eval(expr);
        resStr = math.format(res, { precision: 14 });
        var unRoundedStr = math.format(res);
        if (unRoundedStr.length - resStr.length > 4) {
          info = [
            createDiv('This result contains a round-off error which is hidden from the output. The unrounded result is:'),
            createDiv(unRoundedStr),
            createA('read more...', 'docs/datatypes/numbers.html#roundoff-errors', '_blank')
          ];
        }
      }
      catch (err) {
        resStr = err.toString();
      }

      var preExpr = document.createElement('pre');
      preExpr.className = 'expr';
      preExpr.appendChild(document.createTextNode(expr));
      dom.results.appendChild(preExpr);

      var preRes = document.createElement('pre');
      preRes.className = 'res';
      preRes.appendChild(document.createTextNode(resStr));
      if (info) {
        var divInfo = document.createElement('div');
        info.forEach(function (elem) {
          divInfo.appendChild(elem);
        });
        divInfo.style.display = 'none';

        var divInfoIcon = document.createElement('span');
        divInfoIcon.appendChild(document.createTextNode('round-off error'));
        divInfoIcon.className = 'result-info-icon';
        divInfoIcon.title = 'Click to see more info';
        divInfoIcon.onclick = function () {
          // toggle display
          divInfo.style.display = (divInfo.style.display == '') ? 'none' : '';
          resize();
        };

        preRes.appendChild(divInfoIcon);
        preRes.appendChild(divInfo);
      }
      dom.results.appendChild(preRes);

      scrollDown();
      dom.input.value = '';

      resize();
      // save();  // TODO: save expressions (first we need a method to restore the examples)
    }
  }

  function evalInput() {
    eval(dom.input.value);
  }

  create();
  load();
}

var container = document.getElementById('commandline');
if (container) {
  var editor = new CommandLineEditor({
    container: container,
    math: math
  });
}


/**
 * Test whether the child rect fits completely inside the parent rect.
 * @param {ClientRect} parent
 * @param {ClientRect} child
 * @param {number} margin
 */
function insideRect (parent, child, margin) {
  var _margin = margin !== undefined ? margin : 0;
  return child.left   - _margin >= parent.left
      && child.right  + _margin <= parent.right
      && child.top    - _margin >= parent.top
      && child.bottom + _margin <= parent.bottom;
}

function createDiv (text) {
  var div = document.createElement('div');
  div.appendChild(document.createTextNode(text));
  return div;
}

function createA (text, href, target) {
  var a = document.createElement('a');
  a.href = href;
  a.target = target || '';
  a.appendChild(document.createTextNode(text));

  return a;
}
</script>


    </main>

    <footer>
    <div class="container">
        <div class="row">
            <div class="col-auto">
                <img class="img-fluid" style="width: 4em;" src="/res/img/Logo.png" alt="Logo">
            </div>

            <div class="col-sm-5 col-lg-3">
                <h3>Tex4Tum</h3>
                <ul class="contact-list">
                    <li><a href="mailto:info@latex4ei.de"><i class="fa fa-envelope"></i> info@latex4ei.de</a></li>
                    <li><a href="http://latex4ei.de"><i class="fa fa-globe"></i> latex4ei.de</a></li>
                </ul>
            </div>

            <div class="col-sm-3 col-lg-2">
                <ul class="social-media-list">
                    
                    <li>
<!-- Dont put these Liquid statements into a new line to ensure the correct output format -->
<a href="https://github.com/latex4ei">
    <i class="fab fa-github"></i>
    <span class="username">latex4ei</span>
</a>
</li>
                    
                    <li>
<!-- Dont put these Liquid statements into a new line to ensure the correct output format -->
<a href="https://gitter.im/LaTeX4Ei">
    <i class="fab fa-gitter"></i>
    <span class="username">LaTeX4Ei</span>
</a>
</li>
                    
                    <li>
<!-- Dont put these Liquid statements into a new line to ensure the correct output format -->
<a href="https://facebook.com/LaTeX4Ei">
    <i class="fab fa-facebook-square"></i>
    <span class="username">LaTeX4Ei</span>
</a>
</li>
                    
                </ul>
            </div>

            <div class="col-lg-5">
                <p>Interactive Knowledge Base for Engineers
</p>
            </div>
        </div>
    </div>
</footer>


<!-- Load Javascript at the end for faster page loading -->
<!-- ================================================== -->

<!-- Own javascript -->
<script src="/assets/js/latex4ei.js"></script>
<script src="/assets/js/options.js"></script>

<!-- KaTeX JS -->
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js"
    integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz"
    crossorigin="anonymous"></script>

<!-- Bootstrap, Popper.js, and jQuery -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
    integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
    integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
    crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
    integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV"
    crossorigin="anonymous"></script>

<!-- Fuse + Own Adapter -->
<script src="https://cdn.jsdelivr.net/fuse/2.6.1/fuse.min.js"></script>
<script src="/assets/js/search_index.json"></script>
<script src="/assets/js/t4t_search.js"></script>

<script>
    window.onload = function () {
        // render KaTeX
        renderMath();

        // fix navbar hiding anchor jumps
        window.addEventListener("hashchange", function () { scrollBy(0, -100) });


        Options.loadOptions();

        var opts = {
            data: search_index,
            numResults: 10,
            searchPath: '/search?q=',
            directPath: '.',
            container: document.getElementsByClassName('search-container')
        };
        autocomplete(opts);
    };
</script>


<!-- Mermaid -->
<!--   <link rel="stylesheet" href="https://cdn.rawgit.com/knsv/mermaid/7.0.0/dist/mermaid.css">
  <script type="text/javascript" src="https://cdn.rawgit.com/knsv/mermaid/7.0.0/dist/mermaid.min.js"></script> -->

<!-- ================================================== -->


</body>

</html>
